<!DOCTYPE html>
<html lang="zh-Hans">
    <!-- title -->




<!-- keywords -->




<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" >
    <meta name="author" content="Reminance">
    <meta name="renderer" content="webkit">
    <meta name="copyright" content="Reminance">
    
    <meta name="keywords" content="hexo,hexo-theme,hexo-blog">
    
    <meta name="description" content="">
    <meta name="description" content="略">
<meta property="og:type" content="article">
<meta property="og:title" content="Explain详解与索引最佳实践">
<meta property="og:url" content="https://reminance.github.io/2019/08/24/20190824-01/index.html">
<meta property="og:site_name" content="Reminance">
<meta property="og:description" content="略">
<meta property="og:locale">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image1.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image2.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image3.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image4.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image5.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image6.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image7.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image8.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image9.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image10.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image11.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image12.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image13.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image14.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image15.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image16.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image17.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image18.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image19.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image20.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image21.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image22.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image23.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image24.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image25.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image26.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image27.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image28.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image29.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image30.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image31.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image32.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image33.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image34.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image35.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image36.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image37.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image38.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image39.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image40.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image41.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image42.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image43.png">
<meta property="og:image" content="https://reminance.github.io/assets/20190824-01/image44.png">
<meta property="article:published_time" content="2019-08-24T14:30:16.000Z">
<meta property="article:modified_time" content="2021-03-02T08:53:36.262Z">
<meta property="article:author" content="Reminance">
<meta property="article:tag" content="mysql">
<meta property="article:tag" content="索引">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://reminance.github.io/assets/20190824-01/image1.png">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    
    <title>Explain详解与索引最佳实践 · Reminance&#39;s Studio</title>
    <style type="text/css">
    @font-face {
        font-family: 'Oswald-Regular';
        src: url("/font/Oswald-Regular.ttf");
    }

    body {
        margin: 0;
    }

    header,
    footer,
    .back-top,
    .sidebar,
    .container,
    .site-intro-meta,
    .toc-wrapper {
        display: none;
    }

    .site-intro {
        position: relative;
        z-index: 3;
        width: 100%;
        /* height: 50vh; */
        overflow: hidden;
    }

    .site-intro-placeholder {
        position: absolute;
        z-index: -2;
        top: 0;
        left: 0;
        width: calc(100% + 300px);
        height: 100%;
        background: repeating-linear-gradient(-45deg, #444 0, #444 80px, #333 80px, #333 160px);
        background-position: center center;
        transform: translate3d(-226px, 0, 0);
        animation: gradient-move 2.5s ease-out 0s infinite;
    }

    @keyframes gradient-move {
        0% {
            transform: translate3d(-226px, 0, 0);
        }
        100% {
            transform: translate3d(0, 0, 0);
        }
    }

</style>

    <link rel="preload" href= "/css/style.css?v=20180824" as="style" onload="this.onload=null;this.rel='stylesheet'" />
    <link rel="stylesheet" href= "/css/mobile.css?v=20180824" media="(max-width: 980px)">
    
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'" />
    
    <!-- /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
/* This file is meant as a standalone workflow for
- testing support for link[rel=preload]
- enabling async CSS loading in browsers that do not support rel=preload
- applying rel preload css once loaded, whether supported or not.
*/ -->
<script>
(function( w ){
	"use strict";
	// rel=preload support test
	if( !w.loadCSS ){
		w.loadCSS = function(){};
	}
	// define on the loadCSS obj
	var rp = loadCSS.relpreload = {};
	// rel=preload feature support test
	// runs once and returns a function for compat purposes
	rp.support = (function(){
		var ret;
		try {
			ret = w.document.createElement( "link" ).relList.supports( "preload" );
		} catch (e) {
			ret = false;
		}
		return function(){
			return ret;
		};
	})();

	// if preload isn't supported, get an asynchronous load by using a non-matching media attribute
	// then change that media back to its intended value on load
	rp.bindMediaToggle = function( link ){
		// remember existing media attr for ultimate state, or default to 'all'
		var finalMedia = link.media || "all";

		function enableStylesheet(){
			link.media = finalMedia;
		}

		// bind load handlers to enable media
		if( link.addEventListener ){
			link.addEventListener( "load", enableStylesheet );
		} else if( link.attachEvent ){
			link.attachEvent( "onload", enableStylesheet );
		}

		// Set rel and non-applicable media type to start an async request
		// note: timeout allows this to happen async to let rendering continue in IE
		setTimeout(function(){
			link.rel = "stylesheet";
			link.media = "only x";
		});
		// also enable media after 3 seconds,
		// which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
		setTimeout( enableStylesheet, 3000 );
	};

	// loop through link elements in DOM
	rp.poly = function(){
		// double check this to prevent external calls from running
		if( rp.support() ){
			return;
		}
		var links = w.document.getElementsByTagName( "link" );
		for( var i = 0; i < links.length; i++ ){
			var link = links[ i ];
			// qualify links to those with rel=preload and as=style attrs
			if( link.rel === "preload" && link.getAttribute( "as" ) === "style" && !link.getAttribute( "data-loadcss" ) ){
				// prevent rerunning on link
				link.setAttribute( "data-loadcss", true );
				// bind listeners to toggle media back
				rp.bindMediaToggle( link );
			}
		}
	};

	// if unsupported, run the polyfill
	if( !rp.support() ){
		// run once at least
		rp.poly();

		// rerun poly on an interval until onload
		var run = w.setInterval( rp.poly, 500 );
		if( w.addEventListener ){
			w.addEventListener( "load", function(){
				rp.poly();
				w.clearInterval( run );
			} );
		} else if( w.attachEvent ){
			w.attachEvent( "onload", function(){
				rp.poly();
				w.clearInterval( run );
			} );
		}
	}


	// commonjs
	if( typeof exports !== "undefined" ){
		exports.loadCSS = loadCSS;
	}
	else {
		w.loadCSS = loadCSS;
	}
}( typeof global !== "undefined" ? global : this ) );
</script>

    <link rel="icon" href= "/assets/favicon.ico" />
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js" as="script" />
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js" as="script" />
    <link rel="preload" href="/scripts/main.js" as="script" />
    <link rel="preload" as="font" href="/font/Oswald-Regular.ttf" crossorigin>
    <link rel="preload" as="font" href="https://at.alicdn.com/t/font_327081_1dta1rlogw17zaor.woff" crossorigin>
    
    <!-- fancybox -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" defer></script>
    <!-- 百度统计  -->
    
    <!-- 谷歌统计  -->
    
<meta name="generator" content="Hexo 5.4.0"></head>

    
        <body class="post-body">
    
    
<header class="header">

    <div class="read-progress"></div>
    <div class="header-sidebar-menu">&#xe775;</div>
    <!-- post页的toggle banner  -->
    
    <div class="banner">
            <div class="blog-title">
                <a href="/" >Reminance&#39;s Studio.</a>
            </div>
            <div class="post-title">
                <a href="#" class="post-name">Explain详解与索引最佳实践</a>
            </div>
    </div>
    
    <a class="home-link" href=/>Reminance's Studio.</a>
</header>
    <div class="wrapper">
        <div class="site-intro" style="







height:50vh;
">
    
    <!-- 主页  -->
    
    
    <!-- 404页  -->
            
    <div class="site-intro-placeholder"></div>
    <div class="site-intro-img" style="background-image: url(/intro/post-bg.jpg)"></div>
    <div class="site-intro-meta">
        <!-- 标题  -->
        <h1 class="intro-title">
            <!-- 主页  -->
            
            Explain详解与索引最佳实践
            <!-- 404 -->
            
        </h1>
        <!-- 副标题 -->
        <p class="intro-subtitle">
            <!-- 主页副标题  -->
            
            
            <!-- 404 -->
            
        </p>
        <!-- 文章页meta -->
        
            <div class="post-intros">
                <!-- 文章页标签  -->
                
                    <div class= post-intro-tags >
    
        <a class="post-tag" href="javascript:void(0);" data-tags = "mysql">mysql</a>
    
        <a class="post-tag" href="javascript:void(0);" data-tags = "索引">索引</a>
    
</div>
                
                
                    <div class="post-intro-read">
                        <span>字数统计: <span class="post-count word-count">3.6k</span>阅读时长: <span class="post-count reading-time">15 min</span></span>
                    </div>
                
                <div class="post-intro-meta">
                    <span class="post-intro-calander iconfont-archer">&#xe676;</span>
                    <span class="post-intro-time">2019/08/24</span>
                    
                    <span id="busuanzi_container_page_pv" class="busuanzi-pv">
                        <span class="iconfont-archer">&#xe602;</span>
                        <span id="busuanzi_value_page_pv"></span>
                    </span>
                    
                    <span class="shareWrapper">
                        <span class="iconfont-archer shareIcon">&#xe71d;</span>
                        <span class="shareText">Share</span>
                        <ul class="shareList">
                            <li class="iconfont-archer share-qr" data-type="qr">&#xe75b;
                                <div class="share-qrcode"></div>
                            </li>
                            <li class="iconfont-archer" data-type="weibo">&#xe619;</li>
                            <li class="iconfont-archer" data-type="qzone">&#xe62e;</li>
                            <li class="iconfont-archer" data-type="twitter">&#xe634;</li>
                            <li class="iconfont-archer" data-type="facebook">&#xe67a;</li>
                        </ul>
                    </span>
                </div>
            </div>
        
    </div>
</div>
        <script>
 
  // get user agent
  var browser = {
    versions: function () {
      var u = window.navigator.userAgent;
      return {
        userAgent: u,
        trident: u.indexOf('Trident') > -1, //IE内核
        presto: u.indexOf('Presto') > -1, //opera内核
        webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
        gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
        mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
        ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
        android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
        iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者安卓QQ浏览器
        iPad: u.indexOf('iPad') > -1, //是否为iPad
        webApp: u.indexOf('Safari') == -1, //是否为web应用程序，没有头部与底部
        weixin: u.indexOf('MicroMessenger') == -1, //是否为微信浏览器
        uc: u.indexOf('UCBrowser') > -1 //是否为android下的UC浏览器
      };
    }()
  }
  console.log("userAgent:" + browser.versions.userAgent);

  // callback
  function fontLoaded() {
    console.log('font loaded');
    if (document.getElementsByClassName('site-intro-meta')) {
      document.getElementsByClassName('intro-title')[0].classList.add('intro-fade-in');
      document.getElementsByClassName('intro-subtitle')[0].classList.add('intro-fade-in');
      var postIntros = document.getElementsByClassName('post-intros')[0]
      if (postIntros) {
        postIntros.classList.add('post-fade-in');
      }
    }
  }

  // UC不支持跨域，所以直接显示
  function asyncCb(){
    if (browser.versions.uc) {
      console.log("UCBrowser");
      fontLoaded();
    } else {
      WebFont.load({
        custom: {
          families: ['Oswald-Regular']
        },
        loading: function () {  //所有字体开始加载
          // console.log('loading');
        },
        active: function () {  //所有字体已渲染
          fontLoaded();
        },
        inactive: function () { //字体预加载失败，无效字体或浏览器不支持加载
          console.log('inactive: timeout');
          fontLoaded();
        },
        timeout: 5000 // Set the timeout to two seconds
      });
    }
  }

  function asyncErr(){
    console.warn('script load from CDN failed, will load local script')
  }

  // load webfont-loader async, and add callback function
  function async(u, cb, err) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (cb) { o.addEventListener('load', function (e) { cb(null, e); }, false); }
    if (err) { o.addEventListener('error', function (e) { err(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }

  var asyncLoadWithFallBack = function(arr, success, reject) {
      var currReject = function(){
        reject()
        arr.shift()
        if(arr.length)
          async(arr[0], success, currReject)
        }

      async(arr[0], success, currReject)
  }

  asyncLoadWithFallBack([
    "https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js", 
    "https://cdn.bootcss.com/webfont/1.6.28/webfontloader.js",
    "/lib/webfontloader.min.js"
  ], asyncCb, asyncErr)
</script>        
        <img class="loading" src="/assets/loading.svg" style="display: block; margin: 6rem auto 0 auto; width: 6rem; height: 6rem;" />
        <div class="container container-unloaded">
            <main class="main post-page">
    <article class="article-entry">
        <p>@<a href="../20190824-01">TOC</a></p>
<h1 id="使用EXPLAIN"><a href="#使用EXPLAIN" class="headerlink" title="使用EXPLAIN"></a>使用EXPLAIN</h1><p>使用EXPLAIN关键字可以模拟优化器执行SQL语句，从而知道MySQL是 如何处理你的SQL语句的。分析你的查询语句或是结构的性能瓶颈  </p>
<h2 id="下面是使用-explain-的例子："><a href="#下面是使用-explain-的例子：" class="headerlink" title="下面是使用 explain 的例子："></a>下面是使用 explain 的例子：</h2><p>在 select 语句之前增加 explain 关键字，MySQL 会在查询上设置一个标记，执行查询时，会返回执行计划的信息，而不是执行这条SQL（如果 from 中包含子查询，仍会执行该子查询，将结果放入临时表中）<br>使用的表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS &#96;actor&#96;;</span><br><span class="line">CREATE TABLE &#96;actor&#96; (</span><br><span class="line">  &#96;id&#96; int(11) NOT NULL,</span><br><span class="line">  &#96;name&#96; varchar(45) DEFAULT NULL,</span><br><span class="line">  &#96;update_time&#96; datetime DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (&#96;id&#96;)</span><br><span class="line">) ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8;</span><br><span class="line"></span><br><span class="line">INSERT INTO &#96;actor&#96; (&#96;id&#96;, &#96;name&#96;, &#96;update_time&#96;) VALUES (1,&#39;a&#39;,&#39;2017-12-22 15:27:18&#39;), (2,&#39;b&#39;,&#39;2017-12-22 15:27:18&#39;), (3,&#39;c&#39;,&#39;2017-12-22 15:27:18&#39;);</span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS &#96;film&#96;;</span><br><span class="line">CREATE TABLE &#96;film&#96; (</span><br><span class="line">  &#96;id&#96; int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  &#96;name&#96; varchar(10) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (&#96;id&#96;),</span><br><span class="line">  KEY &#96;idx_name&#96; (&#96;name&#96;)</span><br><span class="line">) ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8;</span><br><span class="line"></span><br><span class="line">INSERT INTO &#96;film&#96; (&#96;id&#96;, &#96;name&#96;) VALUES (3,&#39;film0&#39;),(1,&#39;film1&#39;),(2,&#39;film2&#39;);</span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS &#96;film_actor&#96;;</span><br><span class="line">CREATE TABLE &#96;film_actor&#96; (</span><br><span class="line">  &#96;id&#96; int(11) NOT NULL,</span><br><span class="line">  &#96;film_id&#96; int(11) NOT NULL,</span><br><span class="line">  &#96;actor_id&#96; int(11) NOT NULL,</span><br><span class="line">  &#96;remark&#96; varchar(255) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (&#96;id&#96;),</span><br><span class="line">  KEY &#96;idx_film_actor_id&#96; (&#96;film_id&#96;,&#96;actor_id&#96;)</span><br><span class="line">) ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8;</span><br><span class="line"></span><br><span class="line">INSERT INTO &#96;film_actor&#96; (&#96;id&#96;, &#96;film_id&#96;, &#96;actor_id&#96;) VALUES (1,1,1),(2,1,2),(3,2,1); </span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from actor; </span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image1.png"></p>
<h2 id="在查询中的每个表会输出一行，如果有两个表通过-join-连接查询，那么会输出两行。表的意义相当广泛：可以是子查询、一个-union-结果等。"><a href="#在查询中的每个表会输出一行，如果有两个表通过-join-连接查询，那么会输出两行。表的意义相当广泛：可以是子查询、一个-union-结果等。" class="headerlink" title="在查询中的每个表会输出一行，如果有两个表通过 join 连接查询，那么会输出两行。表的意义相当广泛：可以是子查询、一个 union 结果等。"></a>在查询中的每个表会输出一行，如果有两个表通过 join 连接查询，那么会输出两行。表的意义相当广泛：可以是子查询、一个 union 结果等。</h2><h3 id="explain-有两个变种："><a href="#explain-有两个变种：" class="headerlink" title="explain 有两个变种："></a>explain 有两个变种：</h3><h4 id="1）explain-extended：会在-explain-的基础上额外提供一些查询优化的信息。紧随其后通过-show-warnings-命令可以-得到优化后的查询语句，从而看出优化器优化了什么。额外还有-filtered-列，是一个半分比的值，rows-filtered-100-可以估算出将要和-explain-中前一个表进行连接的行数（前一个表指-explain-中的id值比当前表id值小的表）。"><a href="#1）explain-extended：会在-explain-的基础上额外提供一些查询优化的信息。紧随其后通过-show-warnings-命令可以-得到优化后的查询语句，从而看出优化器优化了什么。额外还有-filtered-列，是一个半分比的值，rows-filtered-100-可以估算出将要和-explain-中前一个表进行连接的行数（前一个表指-explain-中的id值比当前表id值小的表）。" class="headerlink" title="1）explain extended：会在 explain  的基础上额外提供一些查询优化的信息。紧随其后通过 show warnings 命令可以 得到优化后的查询语句，从而看出优化器优化了什么。额外还有 filtered 列，是一个半分比的值，rows * filtered/100 可以估算出将要和 explain 中前一个表进行连接的行数（前一个表指 explain 中的id值比当前表id值小的表）。"></a>1）explain extended：会在 explain  的基础上额外提供一些查询优化的信息。紧随其后通过 show warnings 命令可以 得到优化后的查询语句，从而看出优化器优化了什么。额外还有 filtered 列，是一个半分比的值，rows * filtered/100 可以估算出将要和 explain 中前一个表进行连接的行数（前一个表指 explain 中的id值比当前表id值小的表）。</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain extended select * from film where id &#x3D; 1;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image2.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show warnings; </span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image3.png"></p>
<h4 id="2）explain-partitions：相比-explain-多了个-partitions-字段，如果查询是基于分区表的话，会显示查询将访问的分区。"><a href="#2）explain-partitions：相比-explain-多了个-partitions-字段，如果查询是基于分区表的话，会显示查询将访问的分区。" class="headerlink" title="2）explain partitions：相比 explain 多了个 partitions 字段，如果查询是基于分区表的话，会显示查询将访问的分区。"></a>2）explain partitions：相比 explain 多了个 partitions 字段，如果查询是基于分区表的话，会显示查询将访问的分区。</h4><h2 id="explain-中的列"><a href="#explain-中的列" class="headerlink" title="explain 中的列"></a>explain 中的列</h2><p>接下来我们将展示 explain 中每个列的信息。</p>
<h3 id="1-id列"><a href="#1-id列" class="headerlink" title="1. id列"></a>1. id列</h3><p>id列的编号是 select 的序列号，有几个 select 就有几个id，并且id的顺序是按 select 出现的顺序增长的。MySQL将 select 查询分为简单查询(SIMPLE)和复杂查询(PRIMARY)。<br>复杂查询分为三类：简单子查询、派生表（from语句中的子查询）、union 查询。<br>id列越大执行优先级越高，id相同则从上往下执行，id为NULL最后执行</p>
<h4 id="1）简单子查询"><a href="#1）简单子查询" class="headerlink" title="1）简单子查询"></a>1）简单子查询</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select (select 1 from actor limit 1) from film;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image4.png"></p>
<h4 id="2）from子句中的子查询"><a href="#2）from子句中的子查询" class="headerlink" title="2）from子句中的子查询"></a>2）from子句中的子查询</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select id from (select id from film) as der; </span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image5.png"></p>
<p>这个查询执行时有个临时表别名为der，外部 select 查询引用了这个临时表</p>
<h4 id="3）union查询"><a href="#3）union查询" class="headerlink" title="3）union查询"></a>3）union查询</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select 1 union all select 1;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image6.png"></p>
<p>union结果总是放在一个匿名临时表中，临时表不在SQL中出现，因此它的id是NULL。</p>
<h3 id="2-select-type列"><a href="#2-select-type列" class="headerlink" title="2. select_type列"></a>2. select_type列</h3><p>select_type 表示对应行是简单还是复杂的查询，如果是复杂的查询，又是上述三种复杂查询中的哪一种。</p>
<h4 id="1）simple：简单查询。查询不包含子查询和union"><a href="#1）simple：简单查询。查询不包含子查询和union" class="headerlink" title="1）simple：简单查询。查询不包含子查询和union"></a>1）simple：简单查询。查询不包含子查询和union</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from film where id &#x3D; 2;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image7.png"></p>
<h4 id="2）primary：复杂查询中最外层的-select"><a href="#2）primary：复杂查询中最外层的-select" class="headerlink" title="2）primary：复杂查询中最外层的 select"></a>2）primary：复杂查询中最外层的 select</h4><h4 id="3）subquery：包含在-select-中的子查询（不在-from-子句中）"><a href="#3）subquery：包含在-select-中的子查询（不在-from-子句中）" class="headerlink" title="3）subquery：包含在 select 中的子查询（不在 from 子句中）"></a>3）subquery：包含在 select 中的子查询（不在 from 子句中）</h4><h4 id="4）derived：包含在-from-子句中的子查询。MySQL会将结果存放在一个临时表中，也称为派生表（derived的英文含义）"><a href="#4）derived：包含在-from-子句中的子查询。MySQL会将结果存放在一个临时表中，也称为派生表（derived的英文含义）" class="headerlink" title="4）derived：包含在 from 子句中的子查询。MySQL会将结果存放在一个临时表中，也称为派生表（derived的英文含义）"></a>4）derived：包含在 from 子句中的子查询。MySQL会将结果存放在一个临时表中，也称为派生表（derived的英文含义）</h4><p>用这个例子来了解 primary、subquery 和 derived 类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select (select 1 from actor where id &#x3D; 1) from (select * from film where id &#x3D; 1) der;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image8.png"></p>
<h4 id="5）union：在-union-中的第二个和随后的-select"><a href="#5）union：在-union-中的第二个和随后的-select" class="headerlink" title="5）union：在 union 中的第二个和随后的 select"></a>5）union：在 union 中的第二个和随后的 select</h4><h4 id="6）union-result：从-union-临时表检索结果的-select"><a href="#6）union-result：从-union-临时表检索结果的-select" class="headerlink" title="6）union result：从 union 临时表检索结果的 select"></a>6）union result：从 union 临时表检索结果的 select</h4><p>用这个例子来了解 union 和 union result 类型：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select 1 union all select 1;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image9.png"></p>
<h3 id="3-table列"><a href="#3-table列" class="headerlink" title="3. table列"></a>3. table列</h3><p>这一列表示 explain 的一行正在访问哪个表。<br>当 from 子句中有子查询时，table列是 <derivenN> 格式，表示当前查询依赖 id=N 的查询，于是先执行 id=N 的查询。<br>当有 union 时，UNION RESULT 的 table 列的值为&lt;union1,2&gt;，1和2表示参与 union 的 select 行id。</p>
<h3 id="4-type列"><a href="#4-type列" class="headerlink" title="4. type列"></a>4. type列</h3><p>这一列表示关联类型或访问类型，即MySQL决定如何查找表中的行，查找数据行记录的大概范围。<br>依次从最优到最差分别为：system &gt; const &gt; eq_ref &gt; ref &gt; range &gt; index &gt; ALL<br>一般来说，得保证查询达到range级别，最好达到ref</p>
<h4 id="NULL：mysql能够在优化阶段分解查询语句，在执行阶段用不着再访问表或索引。例如：在索引列中选取最小值，可以单独查找索引来完成，不需要在执行时访问表"><a href="#NULL：mysql能够在优化阶段分解查询语句，在执行阶段用不着再访问表或索引。例如：在索引列中选取最小值，可以单独查找索引来完成，不需要在执行时访问表" class="headerlink" title="NULL：mysql能够在优化阶段分解查询语句，在执行阶段用不着再访问表或索引。例如：在索引列中选取最小值，可以单独查找索引来完成，不需要在执行时访问表"></a>NULL：mysql能够在优化阶段分解查询语句，在执行阶段用不着再访问表或索引。例如：在索引列中选取最小值，可以单独查找索引来完成，不需要在执行时访问表</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select min(id) from film; </span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image10.png"></p>
<h4 id="const-system：mysql能对查询的某部分进行优化并将其转化成一个常量（可以看show-warnings-的结果）。用于-primary-key-或-unique-key-的所有列与常数比较时，所以表最多有一个匹配行，读取1次，速度比较快。system是const的特例，表里只有一条元组匹配时为system"><a href="#const-system：mysql能对查询的某部分进行优化并将其转化成一个常量（可以看show-warnings-的结果）。用于-primary-key-或-unique-key-的所有列与常数比较时，所以表最多有一个匹配行，读取1次，速度比较快。system是const的特例，表里只有一条元组匹配时为system" class="headerlink" title="const, system：mysql能对查询的某部分进行优化并将其转化成一个常量（可以看show warnings 的结果）。用于 primary key 或 unique key 的所有列与常数比较时，所以表最多有一个匹配行，读取1次，速度比较快。system是const的特例，表里只有一条元组匹配时为system"></a>const, system：mysql能对查询的某部分进行优化并将其转化成一个常量（可以看show warnings 的结果）。用于 primary key 或 unique key 的所有列与常数比较时，所以表最多有一个匹配行，读取1次，速度比较快。system是const的特例，表里只有一条元组匹配时为system</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain extended select * from (select * from film where id &#x3D; 1) tmp;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image11.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show warnings; </span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image12.png"></p>
<h4 id="eq-ref：primary-key-或-unique-key-索引的所有部分被连接使用-，最多只会返回一条符合条件的记录。这可能是在-const-之外最好的联接类型了，简单的-select-查询不会出现这种-type。"><a href="#eq-ref：primary-key-或-unique-key-索引的所有部分被连接使用-，最多只会返回一条符合条件的记录。这可能是在-const-之外最好的联接类型了，简单的-select-查询不会出现这种-type。" class="headerlink" title="eq_ref：primary key 或 unique key 索引的所有部分被连接使用 ，最多只会返回一条符合条件的记录。这可能是在 const 之外最好的联接类型了，简单的 select 查询不会出现这种 type。"></a>eq_ref：primary key 或 unique key 索引的所有部分被连接使用 ，最多只会返回一条符合条件的记录。这可能是在 const 之外最好的联接类型了，简单的 select 查询不会出现这种 type。</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from film_actor left join film on film_actor.film_id &#x3D; film.id; </span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image13.png"></p>
<p>ref：相比 eq_ref，不使用唯一索引，而是使用普通索引或者唯一性索引的部分前缀，索引要和某个值相比较，可能会找到多个符合条件的行。</p>
<h5 id="1-简单-select-查询，name是普通索引（非唯一索引）"><a href="#1-简单-select-查询，name是普通索引（非唯一索引）" class="headerlink" title="1. 简单 select 查询，name是普通索引（非唯一索引）"></a>1. 简单 select 查询，name是普通索引（非唯一索引）</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from film where name &#x3D; &quot;film1&quot;; </span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image14.png"></p>
<h5 id="2-关联表查询，idx-film-actor-id是film-id和actor-id的联合索引，这里使用到了film-actor的左边前缀film-id部分。"><a href="#2-关联表查询，idx-film-actor-id是film-id和actor-id的联合索引，这里使用到了film-actor的左边前缀film-id部分。" class="headerlink" title="2.关联表查询，idx_film_actor_id是film_id和actor_id的联合索引，这里使用到了film_actor的左边前缀film_id部分。"></a>2.关联表查询，idx_film_actor_id是film_id和actor_id的联合索引，这里使用到了film_actor的左边前缀film_id部分。</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select film_id from film left join film_actor on film.id &#x3D; film_actor.film_id; </span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image15.png"></p>
<h4 id="range：范围扫描通常出现在-in-between-gt-lt-gt-等操作中。使用一个索引来检索给定范围的行。"><a href="#range：范围扫描通常出现在-in-between-gt-lt-gt-等操作中。使用一个索引来检索给定范围的行。" class="headerlink" title="range：范围扫描通常出现在 in(), between ,&gt; ,&lt;, &gt;= 等操作中。使用一个索引来检索给定范围的行。"></a>range：范围扫描通常出现在 in(), between ,&gt; ,&lt;, &gt;= 等操作中。使用一个索引来检索给定范围的行。</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from actor where id &gt; 1;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image16.png"></p>
<h4 id="index：扫描全表索引，这通常比ALL快一些。（index是从索引中读取的，而all是从硬盘中读取）"><a href="#index：扫描全表索引，这通常比ALL快一些。（index是从索引中读取的，而all是从硬盘中读取）" class="headerlink" title="index：扫描全表索引，这通常比ALL快一些。（index是从索引中读取的，而all是从硬盘中读取）"></a>index：扫描全表索引，这通常比ALL快一些。（index是从索引中读取的，而all是从硬盘中读取）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from film; </span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image17.png"></p>
<h4 id="ALL：即全表扫描，意味着mysql需要从头到尾去查找所需要的行。通常情况下这需要增加索引来进行优化了"><a href="#ALL：即全表扫描，意味着mysql需要从头到尾去查找所需要的行。通常情况下这需要增加索引来进行优化了" class="headerlink" title="ALL：即全表扫描，意味着mysql需要从头到尾去查找所需要的行。通常情况下这需要增加索引来进行优化了"></a>ALL：即全表扫描，意味着mysql需要从头到尾去查找所需要的行。通常情况下这需要增加索引来进行优化了</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from actor; </span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image18.png"></p>
<h3 id="5-possible-keys列"><a href="#5-possible-keys列" class="headerlink" title="5. possible_keys列"></a>5. possible_keys列</h3><p>这一列显示查询可能使用哪些索引来查找。<br>explain 时可能出现 possible_keys 有列，而 key 显示 NULL 的情况，这种情况是因为表中数据不多，mysql认为索引对此查询帮助不大，选择了全表查询。<br>如果该列是NULL，则没有相关的索引。在这种情况下，可以通过检查 where 子句看是否可以创造一个适当的索引来提高查询性能，然后用 explain 查看效果。</p>
<h4 id="6-key列"><a href="#6-key列" class="headerlink" title="6. key列"></a>6. key列</h4><p>这一列显示mysql实际采用哪个索引来优化对该表的访问。<br>如果没有使用索引，则该列是 NULL。如果想强制mysql使用或忽视possible_keys列中的索引，在查询中使用 force index、ignore index。</p>
<h4 id="7-key-len列"><a href="#7-key-len列" class="headerlink" title="7. key_len列"></a>7. key_len列</h4><p>这一列显示了mysql在索引里使用的字节数，通过这个值可以算出具体使用了索引中的哪些列。<br>举例来说，film_actor的联合索引 idx_film_actor_id 由 film_id 和 actor_id 两个int列组成，并且每个int是4字节。通过结果中的key_len=4可推断出查询使用了第一个列：film_id列来执行索引查找。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from film_actor where film_id &#x3D; 2;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image19.png"></p>
<p>key_len计算规则如下：</p>
<h5 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h5><p>char(n)：n字节长度<br>varchar(n)：2字节存储字符串长度，如果是utf-8，则长度 3n + 2</p>
<h5 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h5><p>tinyint：1字节<br>smallint：2字节<br>int：4字节<br>bigint：8字节  　　</p>
<h5 id="时间类型"><a href="#时间类型" class="headerlink" title="时间类型"></a>时间类型</h5><p>date：3字节<br>timestamp：4字节<br>datetime：8字节    </p>
<h5 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h5><p>如果字段允许为 NULL，需要1字节记录是否为 NULL<br>索引最大长度是768字节，当字符串过长时，mysql会做一个类似左前缀索引的处理，将前半部分的字符提取出来做索引。</p>
<h4 id="8-ref列"><a href="#8-ref列" class="headerlink" title="8. ref列"></a>8. ref列</h4><p>这一列显示了在key列记录的索引中，表查找值所用到的列或常量，常见的有：const（常量），字段名（例：film.id）</p>
<h4 id="9-rows列"><a href="#9-rows列" class="headerlink" title="9. rows列"></a>9. rows列</h4><p>这一列是mysql估计要读取并检测的行数，注意这个不是结果集里的行数。</p>
<h4 id="10-Extra列"><a href="#10-Extra列" class="headerlink" title="10. Extra列"></a>10. Extra列</h4><p>这一列展示的是额外信息。常见的重要值如下： </p>
<h5 id="Using-index：查询的列被索引覆盖，并且where筛选条件是索引的前导列，是性能高的表现。一般是使用了覆盖索引-索引包含了所有查询的字段-。对于innodb来说，如果是辅助索引性能会有不少提高"><a href="#Using-index：查询的列被索引覆盖，并且where筛选条件是索引的前导列，是性能高的表现。一般是使用了覆盖索引-索引包含了所有查询的字段-。对于innodb来说，如果是辅助索引性能会有不少提高" class="headerlink" title="Using index：查询的列被索引覆盖，并且where筛选条件是索引的前导列，是性能高的表现。一般是使用了覆盖索引(索引包含了所有查询的字段)。对于innodb来说，如果是辅助索引性能会有不少提高"></a>Using index：查询的列被索引覆盖，并且where筛选条件是索引的前导列，是性能高的表现。一般是使用了覆盖索引(索引包含了所有查询的字段)。对于innodb来说，如果是辅助索引性能会有不少提高</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select film_id from film_actor where film_id &#x3D; 1;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image20.png"></p>
<h5 id="Using-where：查询的列未被索引覆盖，where筛选条件非索引的前导列"><a href="#Using-where：查询的列未被索引覆盖，where筛选条件非索引的前导列" class="headerlink" title="Using where：查询的列未被索引覆盖，where筛选条件非索引的前导列"></a>Using where：查询的列未被索引覆盖，where筛选条件非索引的前导列</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from actor where name &#x3D; &#39;a&#39;;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image21.png"></p>
<h5 id="Using-where-Using-index：查询的列被索引覆盖，并且where筛选条件是索引列之一但是不是索引的前导列，意味着无法直接通过索引查找来查询到符合条件的数据"><a href="#Using-where-Using-index：查询的列被索引覆盖，并且where筛选条件是索引列之一但是不是索引的前导列，意味着无法直接通过索引查找来查询到符合条件的数据" class="headerlink" title="Using where Using index：查询的列被索引覆盖，并且where筛选条件是索引列之一但是不是索引的前导列，意味着无法直接通过索引查找来查询到符合条件的数据"></a>Using where Using index：查询的列被索引覆盖，并且where筛选条件是索引列之一但是不是索引的前导列，意味着无法直接通过索引查找来查询到符合条件的数据</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select film_id from film_actor where actor_id &#x3D; 1;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image22.png"></p>
<h5 id="NULL：查询的列未被索引覆盖，并且where筛选条件是索引的前导列，意味着用到了索引，但是部分字段未被索引覆盖，必须通过“回表”来实现，不是纯粹地用到了索引，也不是完全没用到索引"><a href="#NULL：查询的列未被索引覆盖，并且where筛选条件是索引的前导列，意味着用到了索引，但是部分字段未被索引覆盖，必须通过“回表”来实现，不是纯粹地用到了索引，也不是完全没用到索引" class="headerlink" title="NULL：查询的列未被索引覆盖，并且where筛选条件是索引的前导列，意味着用到了索引，但是部分字段未被索引覆盖，必须通过“回表”来实现，不是纯粹地用到了索引，也不是完全没用到索引"></a>NULL：查询的列未被索引覆盖，并且where筛选条件是索引的前导列，意味着用到了索引，但是部分字段未被索引覆盖，必须通过“回表”来实现，不是纯粹地用到了索引，也不是完全没用到索引</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;explain select * from film_actor where film_id &#x3D; 1;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image23.png"></p>
<h5 id="Using-index-condition：与Using-where类似，查询的列不完全被索引覆盖，where条件中是一个前导列的范围；"><a href="#Using-index-condition：与Using-where类似，查询的列不完全被索引覆盖，where条件中是一个前导列的范围；" class="headerlink" title="Using index condition：与Using where类似，查询的列不完全被索引覆盖，where条件中是一个前导列的范围；"></a>Using index condition：与Using where类似，查询的列不完全被索引覆盖，where条件中是一个前导列的范围；</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from film_actor where film_id &gt; 1;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image24.png"></p>
<h5 id="Using-temporary：mysql需要创建一张临时表来处理查询。出现这种情况一般是要进行优化的，首先是想到用索引来优化。"><a href="#Using-temporary：mysql需要创建一张临时表来处理查询。出现这种情况一般是要进行优化的，首先是想到用索引来优化。" class="headerlink" title="Using temporary：mysql需要创建一张临时表来处理查询。出现这种情况一般是要进行优化的，首先是想到用索引来优化。"></a>Using temporary：mysql需要创建一张临时表来处理查询。出现这种情况一般是要进行优化的，首先是想到用索引来优化。</h5><h6 id="1-actor-name没有索引，此时创建了张临时表来distinct-mysql-gt-explain-select-distinct-name-from-actor"><a href="#1-actor-name没有索引，此时创建了张临时表来distinct-mysql-gt-explain-select-distinct-name-from-actor" class="headerlink" title="1. actor.name没有索引，此时创建了张临时表来distinct mysql&gt; explain select distinct name from actor;"></a>1. actor.name没有索引，此时创建了张临时表来distinct mysql&gt; explain select distinct name from actor;</h6><p><img src="/assets/20190824-01/image25.png"></p>
<h6 id="2-film-name建立了idx-name索引，此时查询时extra是using-index-没有用临时表-mysql-gt-explain-select-distinct-name-from-film"><a href="#2-film-name建立了idx-name索引，此时查询时extra是using-index-没有用临时表-mysql-gt-explain-select-distinct-name-from-film" class="headerlink" title="2. film.name建立了idx_name索引，此时查询时extra是using index,没有用临时表 mysql&gt; explain select distinct name from film;"></a>2. film.name建立了idx_name索引，此时查询时extra是using index,没有用临时表 mysql&gt; explain select distinct name from film;</h6><p><img src="/assets/20190824-01/image26.png"></p>
<h5 id="Using-filesort：mysql-会对结果使用一个外部索引排序，而不是按索引次序从表里读取行。此时mysql会根据联接类型浏览所有符合条件的记录，并保存排序关键字和行指针，然后排序关键字并按顺序检索行信息。这种情况下一般也是要考虑使用索引来优化的。"><a href="#Using-filesort：mysql-会对结果使用一个外部索引排序，而不是按索引次序从表里读取行。此时mysql会根据联接类型浏览所有符合条件的记录，并保存排序关键字和行指针，然后排序关键字并按顺序检索行信息。这种情况下一般也是要考虑使用索引来优化的。" class="headerlink" title="Using filesort：mysql 会对结果使用一个外部索引排序，而不是按索引次序从表里读取行。此时mysql会根据联接类型浏览所有符合条件的记录，并保存排序关键字和行指针，然后排序关键字并按顺序检索行信息。这种情况下一般也是要考虑使用索引来优化的。"></a>Using filesort：mysql 会对结果使用一个外部索引排序，而不是按索引次序从表里读取行。此时mysql会根据联接类型浏览所有符合条件的记录，并保存排序关键字和行指针，然后排序关键字并按顺序检索行信息。这种情况下一般也是要考虑使用索引来优化的。</h5><h6 id="1-actor-name未创建索引，会浏览actor整个表，保存排序关键字name和对应的id，然后排序name并检索行记录-mysql-gt-explain-select-from-actor-order-by-name"><a href="#1-actor-name未创建索引，会浏览actor整个表，保存排序关键字name和对应的id，然后排序name并检索行记录-mysql-gt-explain-select-from-actor-order-by-name" class="headerlink" title="1. actor.name未创建索引，会浏览actor整个表，保存排序关键字name和对应的id，然后排序name并检索行记录 mysql&gt; explain select * from actor order by name;"></a>1. actor.name未创建索引，会浏览actor整个表，保存排序关键字name和对应的id，然后排序name并检索行记录 mysql&gt; explain select * from actor order by name;</h6><p><img src="/assets/20190824-01/image27.png"></p>
<h6 id="2-film-name建立了idx-name索引-此时查询时extra是using-indexmysql-gt-explain-select-from-film-order-by-name"><a href="#2-film-name建立了idx-name索引-此时查询时extra是using-indexmysql-gt-explain-select-from-film-order-by-name" class="headerlink" title="2. film.name建立了idx_name索引,此时查询时extra是using indexmysql&gt; explain select * from film order by name;"></a>2. film.name建立了idx_name索引,此时查询时extra是using indexmysql&gt; explain select * from film order by name;</h6><p><img src="/assets/20190824-01/image28.png"></p>
<h1 id="索引最佳实践"><a href="#索引最佳实践" class="headerlink" title="索引最佳实践"></a>索引最佳实践</h1><p>使用的表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE &#96;employees&#96; (</span><br><span class="line">  &#96;id&#96; int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  &#96;name&#96; varchar(24) NOT NULL DEFAULT &#39;&#39; COMMENT &#39;姓名&#39;,</span><br><span class="line">  &#96;age&#96; int(11) NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;年龄&#39;,</span><br><span class="line">  &#96;position&#96; varchar(20) NOT NULL DEFAULT &#39;&#39; COMMENT &#39;职位&#39;,</span><br><span class="line">  &#96;hire_time&#96; timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;入职时间&#39;,</span><br><span class="line">  PRIMARY KEY (&#96;id&#96;),</span><br><span class="line">  KEY &#96;idx_name_age_position&#96; (&#96;name&#96;,&#96;age&#96;,&#96;position&#96;) USING BTREE</span><br><span class="line">) ENGINE&#x3D;InnoDB AUTO_INCREMENT&#x3D;4 DEFAULT CHARSET&#x3D;utf8 COMMENT&#x3D;&#39;员工记录表&#39;;</span><br><span class="line"></span><br><span class="line">INSERT INTO employees(name,age,position,hire_time) VALUES(&#39;LiLei&#39;,22,&#39;manager&#39;,NOW());</span><br><span class="line">INSERT INTO employees(name,age,position,hire_time) VALUES(&#39;HanMeimei&#39;, 23,&#39;dev&#39;,NOW());</span><br><span class="line">INSERT INTO employees(name,age,position,hire_time) VALUES(&#39;Lucy&#39;,23,&#39;dev&#39;,NOW());</span><br></pre></td></tr></table></figure>

<h2 id="最佳实践"><a href="#最佳实践" class="headerlink" title="最佳实践"></a>最佳实践</h2><h3 id="1-全值匹配"><a href="#1-全值匹配" class="headerlink" title="1. 全值匹配"></a>1. 全值匹配</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM employees WHERE name&#x3D; &#39;LiLei&#39;;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image29.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM employees WHERE name&#x3D; &#39;LiLei&#39; AND age &#x3D; 22;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image30.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM employees WHERE name&#x3D; &#39;LiLei&#39; AND age &#x3D; 22 AND position &#x3D;&#39;manager&#39;;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image31.png"></p>
<h3 id="2-最佳左前缀法则"><a href="#2-最佳左前缀法则" class="headerlink" title="2.最佳左前缀法则"></a>2.最佳左前缀法则</h3><p>如果索引了多列，要遵守最左前缀法则。指的是查询从索引的最左前列开始并且不跳过索引中的列。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM employees WHERE age &#x3D; 22 AND position &#x3D;&#39;manager&#39;;</span><br><span class="line">EXPLAIN SELECT * FROM employees WHERE position &#x3D; &#39;manager&#39;;</span><br><span class="line">EXPLAIN SELECT * FROM employees WHERE name &#x3D; &#39;LiLei&#39;;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image32.png"></p>
<h3 id="3-不在索引列上做任何操作（计算、函数、（自动or手动）类型转换），会导致索引失效而转向全表扫描"><a href="#3-不在索引列上做任何操作（计算、函数、（自动or手动）类型转换），会导致索引失效而转向全表扫描" class="headerlink" title="3.不在索引列上做任何操作（计算、函数、（自动or手动）类型转换），会导致索引失效而转向全表扫描"></a>3.不在索引列上做任何操作（计算、函数、（自动or手动）类型转换），会导致索引失效而转向全表扫描</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM employees WHERE name &#x3D; &#39;LiLei&#39;;</span><br><span class="line">EXPLAIN SELECT * FROM employees WHERE left(name,3) &#x3D; &#39;LiLei&#39;;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image33.png"></p>
<h3 id="4-存储引擎不能使用索引中范围条件右边的列"><a href="#4-存储引擎不能使用索引中范围条件右边的列" class="headerlink" title="4.存储引擎不能使用索引中范围条件右边的列"></a>4.存储引擎不能使用索引中范围条件右边的列</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM employees WHERE name&#x3D; &#39;LiLei&#39; AND age &#x3D; 22 AND position &#x3D;&#39;manager&#39;;</span><br><span class="line">EXPLAIN SELECT * FROM employees WHERE name&#x3D; &#39;LiLei&#39; AND age &gt; 22 AND position &#x3D;&#39;manager&#39;;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image34.png"></p>
<h3 id="5-尽量使用覆盖索引（只访问索引的查询（索引列包含查询列）），减少select-语句"><a href="#5-尽量使用覆盖索引（只访问索引的查询（索引列包含查询列）），减少select-语句" class="headerlink" title="5.尽量使用覆盖索引（只访问索引的查询（索引列包含查询列）），减少select *语句"></a>5.尽量使用覆盖索引（只访问索引的查询（索引列包含查询列）），减少select *语句</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT name,age FROM employees WHERE name&#x3D; &#39;LiLei&#39; AND age &#x3D; 23 AND position &#x3D;&#39;manager&#39;;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image35.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM employees WHERE name&#x3D; &#39;LiLei&#39; AND age &#x3D; 23 AND position &#x3D;&#39;manager&#39;;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image36.png"></p>
<h3 id="6-mysql在使用不等于（！-或者-lt-gt-）的时候无法使用索引会导致全表扫描"><a href="#6-mysql在使用不等于（！-或者-lt-gt-）的时候无法使用索引会导致全表扫描" class="headerlink" title="6.mysql在使用不等于（！=或者&lt;&gt;）的时候无法使用索引会导致全表扫描"></a>6.mysql在使用不等于（！=或者&lt;&gt;）的时候无法使用索引会导致全表扫描</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM employees WHERE name !&#x3D; &#39;LiLei&#39;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image37.png"></p>
<h3 id="7-is-null-is-not-null-也无法使用索引"><a href="#7-is-null-is-not-null-也无法使用索引" class="headerlink" title="7.is null,is not null 也无法使用索引"></a>7.is null,is not null 也无法使用索引</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM employees WHERE name is null</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image38.png"></p>
<h3 id="8-like以通配符开头（’-abc…’）mysql索引失效会变成全表扫描操作"><a href="#8-like以通配符开头（’-abc…’）mysql索引失效会变成全表扫描操作" class="headerlink" title="8.like以通配符开头（’$abc…’）mysql索引失效会变成全表扫描操作"></a>8.like以通配符开头（’$abc…’）mysql索引失效会变成全表扫描操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM employees WHERE name like &#39;%Lei&#39;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image39.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM employees WHERE name like &#39;Lei%&#39;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image40.png"></p>
<h4 id="问题：解决like’-字符串-’索引不被使用的方法？"><a href="#问题：解决like’-字符串-’索引不被使用的方法？" class="headerlink" title="问题：解决like’%字符串%’索引不被使用的方法？"></a>问题：解决like’%字符串%’索引不被使用的方法？</h4><h5 id="a）使用覆盖索引，查询字段必须是建立覆盖索引字段"><a href="#a）使用覆盖索引，查询字段必须是建立覆盖索引字段" class="headerlink" title="a）使用覆盖索引，查询字段必须是建立覆盖索引字段"></a>a）使用覆盖索引，查询字段必须是建立覆盖索引字段</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT name,age,position FROM employees WHERE name like &#39;%Lei%&#39;;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image41.png"></p>
<h5 id="b）当覆盖索引指向的字段是varchar-380-及380以上的字段时，覆盖索引会失效！"><a href="#b）当覆盖索引指向的字段是varchar-380-及380以上的字段时，覆盖索引会失效！" class="headerlink" title="b）当覆盖索引指向的字段是varchar(380)及380以上的字段时，覆盖索引会失效！"></a>b）当覆盖索引指向的字段是varchar(380)及380以上的字段时，覆盖索引会失效！</h5><h3 id="9-字符串不加单引号索引失效"><a href="#9-字符串不加单引号索引失效" class="headerlink" title="9.字符串不加单引号索引失效"></a>9.字符串不加单引号索引失效</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM employees WHERE name &#x3D; &#39;1000&#39;;</span><br><span class="line">EXPLAIN SELECT * FROM employees WHERE name &#x3D; 1000;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image42.png"></p>
<h3 id="10-少用or-用它连接时很多情况下索引会失效"><a href="#10-少用or-用它连接时很多情况下索引会失效" class="headerlink" title="10.少用or,用它连接时很多情况下索引会失效"></a>10.少用or,用它连接时很多情况下索引会失效</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM employees WHERE name &#x3D; &#39;LiLei&#39; or name &#x3D; &#39;HanMeimei&#39;;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/20190824-01/image43.png"></p>
<h1 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h1><p><img src="/assets/20190824-01/image44.png"></p>
<p>like KK%相当于=常量，%KK和%KK% 相当于范围</p>

    </article>
    <!-- license  -->
    
        <div class="license-wrapper">
            <p>原文作者：<a href="https://reminance.github.io">Reminance</a>
            <p>原文链接：<a href="https://reminance.github.io/2019/08/24/20190824-01/">https://reminance.github.io/2019/08/24/20190824-01/</a>
            <p>发表日期：<a href="https://reminance.github.io/2019/08/24/20190824-01/">August 24th 2019, 10:30:16 pm</a>
            <p>更新日期：<a href="https://reminance.github.io/2019/08/24/20190824-01/">March 2nd 2021, 4:53:36 pm</a>
            <p>版权声明：本文采用<a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc/4.0/">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p>
        </div>
    
    <!-- paginator  -->
    <ul class="post-paginator">
        <li class="next">
            
                <div class="nextSlogan">Next Post</div>
                <a href= "/2019/08/31/20190831-01/" title= "使用fatedier/frp搭建内网穿透">
                    <div class="nextTitle">使用fatedier/frp搭建内网穿透</div>
                </a>
            
        </li>
        <li class="previous">
            
                <div class="prevSlogan">Previous Post</div>
                <a href= "/2019/08/14/20190814-01/" title= "刘瑜写给女儿的信：愿你慢慢长大[转]">
                    <div class="prevTitle">刘瑜写给女儿的信：愿你慢慢长大[转]</div>
                </a>
            
        </li>
    </ul>
    <!-- 评论插件 -->
    <!-- 来必力City版安装代码 -->

<!-- City版安装代码已完成 -->
    
    
    <!-- gitalk评论 -->

    <!-- utteranc评论 -->

    <!-- partial('_partial/comment/changyan') -->
    <!--PC版-->


    
    

    <!-- 评论 -->
</main>
            <!-- profile -->
            
        </div>
        <footer class="footer footer-unloaded">
    <!-- social  -->
    
    <div class="social">
        
    
        
            
                <a href="mailto:872666026@qq.com" class="iconfont-archer email" title=email ></a>
            
        
    
        
            
                <a href="//github.com/Reminance" class="iconfont-archer github" target="_blank" title=github></a>
            
        
    
        
            
                <span class="iconfont-archer wechat" title=wechat>
                  
                  <img class="profile-qr" src="/assets/wechat.jpg" />
                </span>
            
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    

    </div>
    
    <!-- powered by Hexo  -->
    <div class="copyright">
        <!-- <span id="hexo-power">Powered by <a href="https://hexo.io/" target="_blank">Hexo</a></span><span class="iconfont-archer power">&#xe635;</span><span id="theme-info">theme <a href="https://github.com/fi3ework/hexo-theme-archer" target="_blank">Archer</a></span> -->
        <span id="hexo-power">Powered by <a href="https://github.com/Reminance" target="_blank">Reminance</a></span><span class="iconfont-archer power">&#xe635;</span>
    </div>
    <!-- 不蒜子  -->
    
    <div class="busuanzi-container">
    
     
     <span id="busuanzi_container_site_pv">PV: <span id="busuanzi_value_site_pv"></span> :)</span>
    
    </div>
    
    <div style="width:300px;margin:0 auto; padding:20px 0;">
        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44011102002607" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;"><p style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:#939393;">粤ICP备19070816号</p></a>
        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44011102002607" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;"><img src="/avatar/beian.png" style="float:left;"/><p style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:#939393;">粤公网安备 44011102002607号</p></a>
    </div>
</footer>

    </div>
    <!-- toc -->
    
    <div class="toc-wrapper" style=
    







top:50vh;

    >
        <div class="toc-catalog">
            <span class="iconfont-archer catalog-icon">&#xe613;</span><span>CATALOG</span>
        </div>
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8EXPLAIN"><span class="toc-number">1.</span> <span class="toc-text">使用EXPLAIN</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8B%E9%9D%A2%E6%98%AF%E4%BD%BF%E7%94%A8-explain-%E7%9A%84%E4%BE%8B%E5%AD%90%EF%BC%9A"><span class="toc-number">1.1.</span> <span class="toc-text">下面是使用 explain 的例子：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E6%9F%A5%E8%AF%A2%E4%B8%AD%E7%9A%84%E6%AF%8F%E4%B8%AA%E8%A1%A8%E4%BC%9A%E8%BE%93%E5%87%BA%E4%B8%80%E8%A1%8C%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%9C%89%E4%B8%A4%E4%B8%AA%E8%A1%A8%E9%80%9A%E8%BF%87-join-%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%EF%BC%8C%E9%82%A3%E4%B9%88%E4%BC%9A%E8%BE%93%E5%87%BA%E4%B8%A4%E8%A1%8C%E3%80%82%E8%A1%A8%E7%9A%84%E6%84%8F%E4%B9%89%E7%9B%B8%E5%BD%93%E5%B9%BF%E6%B3%9B%EF%BC%9A%E5%8F%AF%E4%BB%A5%E6%98%AF%E5%AD%90%E6%9F%A5%E8%AF%A2%E3%80%81%E4%B8%80%E4%B8%AA-union-%E7%BB%93%E6%9E%9C%E7%AD%89%E3%80%82"><span class="toc-number">1.2.</span> <span class="toc-text">在查询中的每个表会输出一行，如果有两个表通过 join 连接查询，那么会输出两行。表的意义相当广泛：可以是子查询、一个 union 结果等。</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#explain-%E6%9C%89%E4%B8%A4%E4%B8%AA%E5%8F%98%E7%A7%8D%EF%BC%9A"><span class="toc-number">1.2.1.</span> <span class="toc-text">explain 有两个变种：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89explain-extended%EF%BC%9A%E4%BC%9A%E5%9C%A8-explain-%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E9%A2%9D%E5%A4%96%E6%8F%90%E4%BE%9B%E4%B8%80%E4%BA%9B%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E7%9A%84%E4%BF%A1%E6%81%AF%E3%80%82%E7%B4%A7%E9%9A%8F%E5%85%B6%E5%90%8E%E9%80%9A%E8%BF%87-show-warnings-%E5%91%BD%E4%BB%A4%E5%8F%AF%E4%BB%A5-%E5%BE%97%E5%88%B0%E4%BC%98%E5%8C%96%E5%90%8E%E7%9A%84%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%EF%BC%8C%E4%BB%8E%E8%80%8C%E7%9C%8B%E5%87%BA%E4%BC%98%E5%8C%96%E5%99%A8%E4%BC%98%E5%8C%96%E4%BA%86%E4%BB%80%E4%B9%88%E3%80%82%E9%A2%9D%E5%A4%96%E8%BF%98%E6%9C%89-filtered-%E5%88%97%EF%BC%8C%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8D%8A%E5%88%86%E6%AF%94%E7%9A%84%E5%80%BC%EF%BC%8Crows-filtered-100-%E5%8F%AF%E4%BB%A5%E4%BC%B0%E7%AE%97%E5%87%BA%E5%B0%86%E8%A6%81%E5%92%8C-explain-%E4%B8%AD%E5%89%8D%E4%B8%80%E4%B8%AA%E8%A1%A8%E8%BF%9B%E8%A1%8C%E8%BF%9E%E6%8E%A5%E7%9A%84%E8%A1%8C%E6%95%B0%EF%BC%88%E5%89%8D%E4%B8%80%E4%B8%AA%E8%A1%A8%E6%8C%87-explain-%E4%B8%AD%E7%9A%84id%E5%80%BC%E6%AF%94%E5%BD%93%E5%89%8D%E8%A1%A8id%E5%80%BC%E5%B0%8F%E7%9A%84%E8%A1%A8%EF%BC%89%E3%80%82"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">1）explain extended：会在 explain  的基础上额外提供一些查询优化的信息。紧随其后通过 show warnings 命令可以 得到优化后的查询语句，从而看出优化器优化了什么。额外还有 filtered 列，是一个半分比的值，rows * filtered&#x2F;100 可以估算出将要和 explain 中前一个表进行连接的行数（前一个表指 explain 中的id值比当前表id值小的表）。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89explain-partitions%EF%BC%9A%E7%9B%B8%E6%AF%94-explain-%E5%A4%9A%E4%BA%86%E4%B8%AA-partitions-%E5%AD%97%E6%AE%B5%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%9F%A5%E8%AF%A2%E6%98%AF%E5%9F%BA%E4%BA%8E%E5%88%86%E5%8C%BA%E8%A1%A8%E7%9A%84%E8%AF%9D%EF%BC%8C%E4%BC%9A%E6%98%BE%E7%A4%BA%E6%9F%A5%E8%AF%A2%E5%B0%86%E8%AE%BF%E9%97%AE%E7%9A%84%E5%88%86%E5%8C%BA%E3%80%82"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">2）explain partitions：相比 explain 多了个 partitions 字段，如果查询是基于分区表的话，会显示查询将访问的分区。</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#explain-%E4%B8%AD%E7%9A%84%E5%88%97"><span class="toc-number">1.3.</span> <span class="toc-text">explain 中的列</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-id%E5%88%97"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. id列</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E7%AE%80%E5%8D%95%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">1）简单子查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89from%E5%AD%90%E5%8F%A5%E4%B8%AD%E7%9A%84%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">2）from子句中的子查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89union%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">3）union查询</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-select-type%E5%88%97"><span class="toc-number">1.3.2.</span> <span class="toc-text">2. select_type列</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89simple%EF%BC%9A%E7%AE%80%E5%8D%95%E6%9F%A5%E8%AF%A2%E3%80%82%E6%9F%A5%E8%AF%A2%E4%B8%8D%E5%8C%85%E5%90%AB%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%92%8Cunion"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">1）simple：简单查询。查询不包含子查询和union</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89primary%EF%BC%9A%E5%A4%8D%E6%9D%82%E6%9F%A5%E8%AF%A2%E4%B8%AD%E6%9C%80%E5%A4%96%E5%B1%82%E7%9A%84-select"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">2）primary：复杂查询中最外层的 select</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89subquery%EF%BC%9A%E5%8C%85%E5%90%AB%E5%9C%A8-select-%E4%B8%AD%E7%9A%84%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%88%E4%B8%8D%E5%9C%A8-from-%E5%AD%90%E5%8F%A5%E4%B8%AD%EF%BC%89"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">3）subquery：包含在 select 中的子查询（不在 from 子句中）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89derived%EF%BC%9A%E5%8C%85%E5%90%AB%E5%9C%A8-from-%E5%AD%90%E5%8F%A5%E4%B8%AD%E7%9A%84%E5%AD%90%E6%9F%A5%E8%AF%A2%E3%80%82MySQL%E4%BC%9A%E5%B0%86%E7%BB%93%E6%9E%9C%E5%AD%98%E6%94%BE%E5%9C%A8%E4%B8%80%E4%B8%AA%E4%B8%B4%E6%97%B6%E8%A1%A8%E4%B8%AD%EF%BC%8C%E4%B9%9F%E7%A7%B0%E4%B8%BA%E6%B4%BE%E7%94%9F%E8%A1%A8%EF%BC%88derived%E7%9A%84%E8%8B%B1%E6%96%87%E5%90%AB%E4%B9%89%EF%BC%89"><span class="toc-number">1.3.2.4.</span> <span class="toc-text">4）derived：包含在 from 子句中的子查询。MySQL会将结果存放在一个临时表中，也称为派生表（derived的英文含义）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89union%EF%BC%9A%E5%9C%A8-union-%E4%B8%AD%E7%9A%84%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%92%8C%E9%9A%8F%E5%90%8E%E7%9A%84-select"><span class="toc-number">1.3.2.5.</span> <span class="toc-text">5）union：在 union 中的第二个和随后的 select</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%BC%89union-result%EF%BC%9A%E4%BB%8E-union-%E4%B8%B4%E6%97%B6%E8%A1%A8%E6%A3%80%E7%B4%A2%E7%BB%93%E6%9E%9C%E7%9A%84-select"><span class="toc-number">1.3.2.6.</span> <span class="toc-text">6）union result：从 union 临时表检索结果的 select</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-table%E5%88%97"><span class="toc-number">1.3.3.</span> <span class="toc-text">3. table列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-type%E5%88%97"><span class="toc-number">1.3.4.</span> <span class="toc-text">4. type列</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#NULL%EF%BC%9Amysql%E8%83%BD%E5%A4%9F%E5%9C%A8%E4%BC%98%E5%8C%96%E9%98%B6%E6%AE%B5%E5%88%86%E8%A7%A3%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%EF%BC%8C%E5%9C%A8%E6%89%A7%E8%A1%8C%E9%98%B6%E6%AE%B5%E7%94%A8%E4%B8%8D%E7%9D%80%E5%86%8D%E8%AE%BF%E9%97%AE%E8%A1%A8%E6%88%96%E7%B4%A2%E5%BC%95%E3%80%82%E4%BE%8B%E5%A6%82%EF%BC%9A%E5%9C%A8%E7%B4%A2%E5%BC%95%E5%88%97%E4%B8%AD%E9%80%89%E5%8F%96%E6%9C%80%E5%B0%8F%E5%80%BC%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%8D%95%E7%8B%AC%E6%9F%A5%E6%89%BE%E7%B4%A2%E5%BC%95%E6%9D%A5%E5%AE%8C%E6%88%90%EF%BC%8C%E4%B8%8D%E9%9C%80%E8%A6%81%E5%9C%A8%E6%89%A7%E8%A1%8C%E6%97%B6%E8%AE%BF%E9%97%AE%E8%A1%A8"><span class="toc-number">1.3.4.1.</span> <span class="toc-text">NULL：mysql能够在优化阶段分解查询语句，在执行阶段用不着再访问表或索引。例如：在索引列中选取最小值，可以单独查找索引来完成，不需要在执行时访问表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#const-system%EF%BC%9Amysql%E8%83%BD%E5%AF%B9%E6%9F%A5%E8%AF%A2%E7%9A%84%E6%9F%90%E9%83%A8%E5%88%86%E8%BF%9B%E8%A1%8C%E4%BC%98%E5%8C%96%E5%B9%B6%E5%B0%86%E5%85%B6%E8%BD%AC%E5%8C%96%E6%88%90%E4%B8%80%E4%B8%AA%E5%B8%B8%E9%87%8F%EF%BC%88%E5%8F%AF%E4%BB%A5%E7%9C%8Bshow-warnings-%E7%9A%84%E7%BB%93%E6%9E%9C%EF%BC%89%E3%80%82%E7%94%A8%E4%BA%8E-primary-key-%E6%88%96-unique-key-%E7%9A%84%E6%89%80%E6%9C%89%E5%88%97%E4%B8%8E%E5%B8%B8%E6%95%B0%E6%AF%94%E8%BE%83%E6%97%B6%EF%BC%8C%E6%89%80%E4%BB%A5%E8%A1%A8%E6%9C%80%E5%A4%9A%E6%9C%89%E4%B8%80%E4%B8%AA%E5%8C%B9%E9%85%8D%E8%A1%8C%EF%BC%8C%E8%AF%BB%E5%8F%961%E6%AC%A1%EF%BC%8C%E9%80%9F%E5%BA%A6%E6%AF%94%E8%BE%83%E5%BF%AB%E3%80%82system%E6%98%AFconst%E7%9A%84%E7%89%B9%E4%BE%8B%EF%BC%8C%E8%A1%A8%E9%87%8C%E5%8F%AA%E6%9C%89%E4%B8%80%E6%9D%A1%E5%85%83%E7%BB%84%E5%8C%B9%E9%85%8D%E6%97%B6%E4%B8%BAsystem"><span class="toc-number">1.3.4.2.</span> <span class="toc-text">const, system：mysql能对查询的某部分进行优化并将其转化成一个常量（可以看show warnings 的结果）。用于 primary key 或 unique key 的所有列与常数比较时，所以表最多有一个匹配行，读取1次，速度比较快。system是const的特例，表里只有一条元组匹配时为system</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#eq-ref%EF%BC%9Aprimary-key-%E6%88%96-unique-key-%E7%B4%A2%E5%BC%95%E7%9A%84%E6%89%80%E6%9C%89%E9%83%A8%E5%88%86%E8%A2%AB%E8%BF%9E%E6%8E%A5%E4%BD%BF%E7%94%A8-%EF%BC%8C%E6%9C%80%E5%A4%9A%E5%8F%AA%E4%BC%9A%E8%BF%94%E5%9B%9E%E4%B8%80%E6%9D%A1%E7%AC%A6%E5%90%88%E6%9D%A1%E4%BB%B6%E7%9A%84%E8%AE%B0%E5%BD%95%E3%80%82%E8%BF%99%E5%8F%AF%E8%83%BD%E6%98%AF%E5%9C%A8-const-%E4%B9%8B%E5%A4%96%E6%9C%80%E5%A5%BD%E7%9A%84%E8%81%94%E6%8E%A5%E7%B1%BB%E5%9E%8B%E4%BA%86%EF%BC%8C%E7%AE%80%E5%8D%95%E7%9A%84-select-%E6%9F%A5%E8%AF%A2%E4%B8%8D%E4%BC%9A%E5%87%BA%E7%8E%B0%E8%BF%99%E7%A7%8D-type%E3%80%82"><span class="toc-number">1.3.4.3.</span> <span class="toc-text">eq_ref：primary key 或 unique key 索引的所有部分被连接使用 ，最多只会返回一条符合条件的记录。这可能是在 const 之外最好的联接类型了，简单的 select 查询不会出现这种 type。</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E7%AE%80%E5%8D%95-select-%E6%9F%A5%E8%AF%A2%EF%BC%8Cname%E6%98%AF%E6%99%AE%E9%80%9A%E7%B4%A2%E5%BC%95%EF%BC%88%E9%9D%9E%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95%EF%BC%89"><span class="toc-number">1.3.4.3.1.</span> <span class="toc-text">1. 简单 select 查询，name是普通索引（非唯一索引）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%85%B3%E8%81%94%E8%A1%A8%E6%9F%A5%E8%AF%A2%EF%BC%8Cidx-film-actor-id%E6%98%AFfilm-id%E5%92%8Cactor-id%E7%9A%84%E8%81%94%E5%90%88%E7%B4%A2%E5%BC%95%EF%BC%8C%E8%BF%99%E9%87%8C%E4%BD%BF%E7%94%A8%E5%88%B0%E4%BA%86film-actor%E7%9A%84%E5%B7%A6%E8%BE%B9%E5%89%8D%E7%BC%80film-id%E9%83%A8%E5%88%86%E3%80%82"><span class="toc-number">1.3.4.3.2.</span> <span class="toc-text">2.关联表查询，idx_film_actor_id是film_id和actor_id的联合索引，这里使用到了film_actor的左边前缀film_id部分。</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#range%EF%BC%9A%E8%8C%83%E5%9B%B4%E6%89%AB%E6%8F%8F%E9%80%9A%E5%B8%B8%E5%87%BA%E7%8E%B0%E5%9C%A8-in-between-gt-lt-gt-%E7%AD%89%E6%93%8D%E4%BD%9C%E4%B8%AD%E3%80%82%E4%BD%BF%E7%94%A8%E4%B8%80%E4%B8%AA%E7%B4%A2%E5%BC%95%E6%9D%A5%E6%A3%80%E7%B4%A2%E7%BB%99%E5%AE%9A%E8%8C%83%E5%9B%B4%E7%9A%84%E8%A1%8C%E3%80%82"><span class="toc-number">1.3.4.4.</span> <span class="toc-text">range：范围扫描通常出现在 in(), between ,&gt; ,&lt;, &gt;&#x3D; 等操作中。使用一个索引来检索给定范围的行。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#index%EF%BC%9A%E6%89%AB%E6%8F%8F%E5%85%A8%E8%A1%A8%E7%B4%A2%E5%BC%95%EF%BC%8C%E8%BF%99%E9%80%9A%E5%B8%B8%E6%AF%94ALL%E5%BF%AB%E4%B8%80%E4%BA%9B%E3%80%82%EF%BC%88index%E6%98%AF%E4%BB%8E%E7%B4%A2%E5%BC%95%E4%B8%AD%E8%AF%BB%E5%8F%96%E7%9A%84%EF%BC%8C%E8%80%8Call%E6%98%AF%E4%BB%8E%E7%A1%AC%E7%9B%98%E4%B8%AD%E8%AF%BB%E5%8F%96%EF%BC%89"><span class="toc-number">1.3.4.5.</span> <span class="toc-text">index：扫描全表索引，这通常比ALL快一些。（index是从索引中读取的，而all是从硬盘中读取）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ALL%EF%BC%9A%E5%8D%B3%E5%85%A8%E8%A1%A8%E6%89%AB%E6%8F%8F%EF%BC%8C%E6%84%8F%E5%91%B3%E7%9D%80mysql%E9%9C%80%E8%A6%81%E4%BB%8E%E5%A4%B4%E5%88%B0%E5%B0%BE%E5%8E%BB%E6%9F%A5%E6%89%BE%E6%89%80%E9%9C%80%E8%A6%81%E7%9A%84%E8%A1%8C%E3%80%82%E9%80%9A%E5%B8%B8%E6%83%85%E5%86%B5%E4%B8%8B%E8%BF%99%E9%9C%80%E8%A6%81%E5%A2%9E%E5%8A%A0%E7%B4%A2%E5%BC%95%E6%9D%A5%E8%BF%9B%E8%A1%8C%E4%BC%98%E5%8C%96%E4%BA%86"><span class="toc-number">1.3.4.6.</span> <span class="toc-text">ALL：即全表扫描，意味着mysql需要从头到尾去查找所需要的行。通常情况下这需要增加索引来进行优化了</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-possible-keys%E5%88%97"><span class="toc-number">1.3.5.</span> <span class="toc-text">5. possible_keys列</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-key%E5%88%97"><span class="toc-number">1.3.5.1.</span> <span class="toc-text">6. key列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-key-len%E5%88%97"><span class="toc-number">1.3.5.2.</span> <span class="toc-text">7. key_len列</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.3.5.2.1.</span> <span class="toc-text">字符串</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.5.2.2.</span> <span class="toc-text">数值类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.5.2.3.</span> <span class="toc-text">时间类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-number">1.3.5.2.4.</span> <span class="toc-text">其他</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-ref%E5%88%97"><span class="toc-number">1.3.5.3.</span> <span class="toc-text">8. ref列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-rows%E5%88%97"><span class="toc-number">1.3.5.4.</span> <span class="toc-text">9. rows列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-Extra%E5%88%97"><span class="toc-number">1.3.5.5.</span> <span class="toc-text">10. Extra列</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Using-index%EF%BC%9A%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%88%97%E8%A2%AB%E7%B4%A2%E5%BC%95%E8%A6%86%E7%9B%96%EF%BC%8C%E5%B9%B6%E4%B8%94where%E7%AD%9B%E9%80%89%E6%9D%A1%E4%BB%B6%E6%98%AF%E7%B4%A2%E5%BC%95%E7%9A%84%E5%89%8D%E5%AF%BC%E5%88%97%EF%BC%8C%E6%98%AF%E6%80%A7%E8%83%BD%E9%AB%98%E7%9A%84%E8%A1%A8%E7%8E%B0%E3%80%82%E4%B8%80%E8%88%AC%E6%98%AF%E4%BD%BF%E7%94%A8%E4%BA%86%E8%A6%86%E7%9B%96%E7%B4%A2%E5%BC%95-%E7%B4%A2%E5%BC%95%E5%8C%85%E5%90%AB%E4%BA%86%E6%89%80%E6%9C%89%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%AD%97%E6%AE%B5-%E3%80%82%E5%AF%B9%E4%BA%8Einnodb%E6%9D%A5%E8%AF%B4%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%98%AF%E8%BE%85%E5%8A%A9%E7%B4%A2%E5%BC%95%E6%80%A7%E8%83%BD%E4%BC%9A%E6%9C%89%E4%B8%8D%E5%B0%91%E6%8F%90%E9%AB%98"><span class="toc-number">1.3.5.5.1.</span> <span class="toc-text">Using index：查询的列被索引覆盖，并且where筛选条件是索引的前导列，是性能高的表现。一般是使用了覆盖索引(索引包含了所有查询的字段)。对于innodb来说，如果是辅助索引性能会有不少提高</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Using-where%EF%BC%9A%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%88%97%E6%9C%AA%E8%A2%AB%E7%B4%A2%E5%BC%95%E8%A6%86%E7%9B%96%EF%BC%8Cwhere%E7%AD%9B%E9%80%89%E6%9D%A1%E4%BB%B6%E9%9D%9E%E7%B4%A2%E5%BC%95%E7%9A%84%E5%89%8D%E5%AF%BC%E5%88%97"><span class="toc-number">1.3.5.5.2.</span> <span class="toc-text">Using where：查询的列未被索引覆盖，where筛选条件非索引的前导列</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Using-where-Using-index%EF%BC%9A%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%88%97%E8%A2%AB%E7%B4%A2%E5%BC%95%E8%A6%86%E7%9B%96%EF%BC%8C%E5%B9%B6%E4%B8%94where%E7%AD%9B%E9%80%89%E6%9D%A1%E4%BB%B6%E6%98%AF%E7%B4%A2%E5%BC%95%E5%88%97%E4%B9%8B%E4%B8%80%E4%BD%86%E6%98%AF%E4%B8%8D%E6%98%AF%E7%B4%A2%E5%BC%95%E7%9A%84%E5%89%8D%E5%AF%BC%E5%88%97%EF%BC%8C%E6%84%8F%E5%91%B3%E7%9D%80%E6%97%A0%E6%B3%95%E7%9B%B4%E6%8E%A5%E9%80%9A%E8%BF%87%E7%B4%A2%E5%BC%95%E6%9F%A5%E6%89%BE%E6%9D%A5%E6%9F%A5%E8%AF%A2%E5%88%B0%E7%AC%A6%E5%90%88%E6%9D%A1%E4%BB%B6%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.5.5.3.</span> <span class="toc-text">Using where Using index：查询的列被索引覆盖，并且where筛选条件是索引列之一但是不是索引的前导列，意味着无法直接通过索引查找来查询到符合条件的数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#NULL%EF%BC%9A%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%88%97%E6%9C%AA%E8%A2%AB%E7%B4%A2%E5%BC%95%E8%A6%86%E7%9B%96%EF%BC%8C%E5%B9%B6%E4%B8%94where%E7%AD%9B%E9%80%89%E6%9D%A1%E4%BB%B6%E6%98%AF%E7%B4%A2%E5%BC%95%E7%9A%84%E5%89%8D%E5%AF%BC%E5%88%97%EF%BC%8C%E6%84%8F%E5%91%B3%E7%9D%80%E7%94%A8%E5%88%B0%E4%BA%86%E7%B4%A2%E5%BC%95%EF%BC%8C%E4%BD%86%E6%98%AF%E9%83%A8%E5%88%86%E5%AD%97%E6%AE%B5%E6%9C%AA%E8%A2%AB%E7%B4%A2%E5%BC%95%E8%A6%86%E7%9B%96%EF%BC%8C%E5%BF%85%E9%A1%BB%E9%80%9A%E8%BF%87%E2%80%9C%E5%9B%9E%E8%A1%A8%E2%80%9D%E6%9D%A5%E5%AE%9E%E7%8E%B0%EF%BC%8C%E4%B8%8D%E6%98%AF%E7%BA%AF%E7%B2%B9%E5%9C%B0%E7%94%A8%E5%88%B0%E4%BA%86%E7%B4%A2%E5%BC%95%EF%BC%8C%E4%B9%9F%E4%B8%8D%E6%98%AF%E5%AE%8C%E5%85%A8%E6%B2%A1%E7%94%A8%E5%88%B0%E7%B4%A2%E5%BC%95"><span class="toc-number">1.3.5.5.4.</span> <span class="toc-text">NULL：查询的列未被索引覆盖，并且where筛选条件是索引的前导列，意味着用到了索引，但是部分字段未被索引覆盖，必须通过“回表”来实现，不是纯粹地用到了索引，也不是完全没用到索引</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Using-index-condition%EF%BC%9A%E4%B8%8EUsing-where%E7%B1%BB%E4%BC%BC%EF%BC%8C%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%88%97%E4%B8%8D%E5%AE%8C%E5%85%A8%E8%A2%AB%E7%B4%A2%E5%BC%95%E8%A6%86%E7%9B%96%EF%BC%8Cwhere%E6%9D%A1%E4%BB%B6%E4%B8%AD%E6%98%AF%E4%B8%80%E4%B8%AA%E5%89%8D%E5%AF%BC%E5%88%97%E7%9A%84%E8%8C%83%E5%9B%B4%EF%BC%9B"><span class="toc-number">1.3.5.5.5.</span> <span class="toc-text">Using index condition：与Using where类似，查询的列不完全被索引覆盖，where条件中是一个前导列的范围；</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Using-temporary%EF%BC%9Amysql%E9%9C%80%E8%A6%81%E5%88%9B%E5%BB%BA%E4%B8%80%E5%BC%A0%E4%B8%B4%E6%97%B6%E8%A1%A8%E6%9D%A5%E5%A4%84%E7%90%86%E6%9F%A5%E8%AF%A2%E3%80%82%E5%87%BA%E7%8E%B0%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%80%E8%88%AC%E6%98%AF%E8%A6%81%E8%BF%9B%E8%A1%8C%E4%BC%98%E5%8C%96%E7%9A%84%EF%BC%8C%E9%A6%96%E5%85%88%E6%98%AF%E6%83%B3%E5%88%B0%E7%94%A8%E7%B4%A2%E5%BC%95%E6%9D%A5%E4%BC%98%E5%8C%96%E3%80%82"><span class="toc-number">1.3.5.5.6.</span> <span class="toc-text">Using temporary：mysql需要创建一张临时表来处理查询。出现这种情况一般是要进行优化的，首先是想到用索引来优化。</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-actor-name%E6%B2%A1%E6%9C%89%E7%B4%A2%E5%BC%95%EF%BC%8C%E6%AD%A4%E6%97%B6%E5%88%9B%E5%BB%BA%E4%BA%86%E5%BC%A0%E4%B8%B4%E6%97%B6%E8%A1%A8%E6%9D%A5distinct-mysql-gt-explain-select-distinct-name-from-actor"><span class="toc-number">1.3.5.5.6.1.</span> <span class="toc-text">1. actor.name没有索引，此时创建了张临时表来distinct mysql&gt; explain select distinct name from actor;</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-film-name%E5%BB%BA%E7%AB%8B%E4%BA%86idx-name%E7%B4%A2%E5%BC%95%EF%BC%8C%E6%AD%A4%E6%97%B6%E6%9F%A5%E8%AF%A2%E6%97%B6extra%E6%98%AFusing-index-%E6%B2%A1%E6%9C%89%E7%94%A8%E4%B8%B4%E6%97%B6%E8%A1%A8-mysql-gt-explain-select-distinct-name-from-film"><span class="toc-number">1.3.5.5.6.2.</span> <span class="toc-text">2. film.name建立了idx_name索引，此时查询时extra是using index,没有用临时表 mysql&gt; explain select distinct name from film;</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Using-filesort%EF%BC%9Amysql-%E4%BC%9A%E5%AF%B9%E7%BB%93%E6%9E%9C%E4%BD%BF%E7%94%A8%E4%B8%80%E4%B8%AA%E5%A4%96%E9%83%A8%E7%B4%A2%E5%BC%95%E6%8E%92%E5%BA%8F%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF%E6%8C%89%E7%B4%A2%E5%BC%95%E6%AC%A1%E5%BA%8F%E4%BB%8E%E8%A1%A8%E9%87%8C%E8%AF%BB%E5%8F%96%E8%A1%8C%E3%80%82%E6%AD%A4%E6%97%B6mysql%E4%BC%9A%E6%A0%B9%E6%8D%AE%E8%81%94%E6%8E%A5%E7%B1%BB%E5%9E%8B%E6%B5%8F%E8%A7%88%E6%89%80%E6%9C%89%E7%AC%A6%E5%90%88%E6%9D%A1%E4%BB%B6%E7%9A%84%E8%AE%B0%E5%BD%95%EF%BC%8C%E5%B9%B6%E4%BF%9D%E5%AD%98%E6%8E%92%E5%BA%8F%E5%85%B3%E9%94%AE%E5%AD%97%E5%92%8C%E8%A1%8C%E6%8C%87%E9%92%88%EF%BC%8C%E7%84%B6%E5%90%8E%E6%8E%92%E5%BA%8F%E5%85%B3%E9%94%AE%E5%AD%97%E5%B9%B6%E6%8C%89%E9%A1%BA%E5%BA%8F%E6%A3%80%E7%B4%A2%E8%A1%8C%E4%BF%A1%E6%81%AF%E3%80%82%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%E4%B8%80%E8%88%AC%E4%B9%9F%E6%98%AF%E8%A6%81%E8%80%83%E8%99%91%E4%BD%BF%E7%94%A8%E7%B4%A2%E5%BC%95%E6%9D%A5%E4%BC%98%E5%8C%96%E7%9A%84%E3%80%82"><span class="toc-number">1.3.5.5.7.</span> <span class="toc-text">Using filesort：mysql 会对结果使用一个外部索引排序，而不是按索引次序从表里读取行。此时mysql会根据联接类型浏览所有符合条件的记录，并保存排序关键字和行指针，然后排序关键字并按顺序检索行信息。这种情况下一般也是要考虑使用索引来优化的。</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-actor-name%E6%9C%AA%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%EF%BC%8C%E4%BC%9A%E6%B5%8F%E8%A7%88actor%E6%95%B4%E4%B8%AA%E8%A1%A8%EF%BC%8C%E4%BF%9D%E5%AD%98%E6%8E%92%E5%BA%8F%E5%85%B3%E9%94%AE%E5%AD%97name%E5%92%8C%E5%AF%B9%E5%BA%94%E7%9A%84id%EF%BC%8C%E7%84%B6%E5%90%8E%E6%8E%92%E5%BA%8Fname%E5%B9%B6%E6%A3%80%E7%B4%A2%E8%A1%8C%E8%AE%B0%E5%BD%95-mysql-gt-explain-select-from-actor-order-by-name"><span class="toc-number">1.3.5.5.7.1.</span> <span class="toc-text">1. actor.name未创建索引，会浏览actor整个表，保存排序关键字name和对应的id，然后排序name并检索行记录 mysql&gt; explain select * from actor order by name;</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-film-name%E5%BB%BA%E7%AB%8B%E4%BA%86idx-name%E7%B4%A2%E5%BC%95-%E6%AD%A4%E6%97%B6%E6%9F%A5%E8%AF%A2%E6%97%B6extra%E6%98%AFusing-indexmysql-gt-explain-select-from-film-order-by-name"><span class="toc-number">1.3.5.5.7.2.</span> <span class="toc-text">2. film.name建立了idx_name索引,此时查询时extra是using indexmysql&gt; explain select * from film order by name;</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-number">2.</span> <span class="toc-text">索引最佳实践</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-number">2.1.</span> <span class="toc-text">最佳实践</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%85%A8%E5%80%BC%E5%8C%B9%E9%85%8D"><span class="toc-number">2.1.1.</span> <span class="toc-text">1. 全值匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%9C%80%E4%BD%B3%E5%B7%A6%E5%89%8D%E7%BC%80%E6%B3%95%E5%88%99"><span class="toc-number">2.1.2.</span> <span class="toc-text">2.最佳左前缀法则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%B8%8D%E5%9C%A8%E7%B4%A2%E5%BC%95%E5%88%97%E4%B8%8A%E5%81%9A%E4%BB%BB%E4%BD%95%E6%93%8D%E4%BD%9C%EF%BC%88%E8%AE%A1%E7%AE%97%E3%80%81%E5%87%BD%E6%95%B0%E3%80%81%EF%BC%88%E8%87%AA%E5%8A%A8or%E6%89%8B%E5%8A%A8%EF%BC%89%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%EF%BC%89%EF%BC%8C%E4%BC%9A%E5%AF%BC%E8%87%B4%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88%E8%80%8C%E8%BD%AC%E5%90%91%E5%85%A8%E8%A1%A8%E6%89%AB%E6%8F%8F"><span class="toc-number">2.1.3.</span> <span class="toc-text">3.不在索引列上做任何操作（计算、函数、（自动or手动）类型转换），会导致索引失效而转向全表扫描</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E4%B8%8D%E8%83%BD%E4%BD%BF%E7%94%A8%E7%B4%A2%E5%BC%95%E4%B8%AD%E8%8C%83%E5%9B%B4%E6%9D%A1%E4%BB%B6%E5%8F%B3%E8%BE%B9%E7%9A%84%E5%88%97"><span class="toc-number">2.1.4.</span> <span class="toc-text">4.存储引擎不能使用索引中范围条件右边的列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%B0%BD%E9%87%8F%E4%BD%BF%E7%94%A8%E8%A6%86%E7%9B%96%E7%B4%A2%E5%BC%95%EF%BC%88%E5%8F%AA%E8%AE%BF%E9%97%AE%E7%B4%A2%E5%BC%95%E7%9A%84%E6%9F%A5%E8%AF%A2%EF%BC%88%E7%B4%A2%E5%BC%95%E5%88%97%E5%8C%85%E5%90%AB%E6%9F%A5%E8%AF%A2%E5%88%97%EF%BC%89%EF%BC%89%EF%BC%8C%E5%87%8F%E5%B0%91select-%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.1.5.</span> <span class="toc-text">5.尽量使用覆盖索引（只访问索引的查询（索引列包含查询列）），减少select *语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-mysql%E5%9C%A8%E4%BD%BF%E7%94%A8%E4%B8%8D%E7%AD%89%E4%BA%8E%EF%BC%88%EF%BC%81-%E6%88%96%E8%80%85-lt-gt-%EF%BC%89%E7%9A%84%E6%97%B6%E5%80%99%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8%E7%B4%A2%E5%BC%95%E4%BC%9A%E5%AF%BC%E8%87%B4%E5%85%A8%E8%A1%A8%E6%89%AB%E6%8F%8F"><span class="toc-number">2.1.6.</span> <span class="toc-text">6.mysql在使用不等于（！&#x3D;或者&lt;&gt;）的时候无法使用索引会导致全表扫描</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-is-null-is-not-null-%E4%B9%9F%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8%E7%B4%A2%E5%BC%95"><span class="toc-number">2.1.7.</span> <span class="toc-text">7.is null,is not null 也无法使用索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-like%E4%BB%A5%E9%80%9A%E9%85%8D%E7%AC%A6%E5%BC%80%E5%A4%B4%EF%BC%88%E2%80%99-abc%E2%80%A6%E2%80%99%EF%BC%89mysql%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88%E4%BC%9A%E5%8F%98%E6%88%90%E5%85%A8%E8%A1%A8%E6%89%AB%E6%8F%8F%E6%93%8D%E4%BD%9C"><span class="toc-number">2.1.8.</span> <span class="toc-text">8.like以通配符开头（’$abc…’）mysql索引失效会变成全表扫描操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%EF%BC%9A%E8%A7%A3%E5%86%B3like%E2%80%99-%E5%AD%97%E7%AC%A6%E4%B8%B2-%E2%80%99%E7%B4%A2%E5%BC%95%E4%B8%8D%E8%A2%AB%E4%BD%BF%E7%94%A8%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9F"><span class="toc-number">2.1.8.1.</span> <span class="toc-text">问题：解决like’%字符串%’索引不被使用的方法？</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#a%EF%BC%89%E4%BD%BF%E7%94%A8%E8%A6%86%E7%9B%96%E7%B4%A2%E5%BC%95%EF%BC%8C%E6%9F%A5%E8%AF%A2%E5%AD%97%E6%AE%B5%E5%BF%85%E9%A1%BB%E6%98%AF%E5%BB%BA%E7%AB%8B%E8%A6%86%E7%9B%96%E7%B4%A2%E5%BC%95%E5%AD%97%E6%AE%B5"><span class="toc-number">2.1.8.1.1.</span> <span class="toc-text">a）使用覆盖索引，查询字段必须是建立覆盖索引字段</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#b%EF%BC%89%E5%BD%93%E8%A6%86%E7%9B%96%E7%B4%A2%E5%BC%95%E6%8C%87%E5%90%91%E7%9A%84%E5%AD%97%E6%AE%B5%E6%98%AFvarchar-380-%E5%8F%8A380%E4%BB%A5%E4%B8%8A%E7%9A%84%E5%AD%97%E6%AE%B5%E6%97%B6%EF%BC%8C%E8%A6%86%E7%9B%96%E7%B4%A2%E5%BC%95%E4%BC%9A%E5%A4%B1%E6%95%88%EF%BC%81"><span class="toc-number">2.1.8.1.2.</span> <span class="toc-text">b）当覆盖索引指向的字段是varchar(380)及380以上的字段时，覆盖索引会失效！</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8D%E5%8A%A0%E5%8D%95%E5%BC%95%E5%8F%B7%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88"><span class="toc-number">2.1.9.</span> <span class="toc-text">9.字符串不加单引号索引失效</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E5%B0%91%E7%94%A8or-%E7%94%A8%E5%AE%83%E8%BF%9E%E6%8E%A5%E6%97%B6%E5%BE%88%E5%A4%9A%E6%83%85%E5%86%B5%E4%B8%8B%E7%B4%A2%E5%BC%95%E4%BC%9A%E5%A4%B1%E6%95%88"><span class="toc-number">2.1.10.</span> <span class="toc-text">10.少用or,用它连接时很多情况下索引会失效</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%EF%BC%9A"><span class="toc-number">3.</span> <span class="toc-text">总结：</span></a></li></ol>
    </div>
    
    <div class="back-top iconfont-archer">&#xe639;</div>
    <div class="sidebar sidebar-hide">
    <ul class="sidebar-tabs sidebar-tabs-active-0">
        <li class="sidebar-tab-archives"><span class="iconfont-archer">&#xe67d;</span><span class="tab-name">Archive</span></li>
        <li class="sidebar-tab-tags"><span class="iconfont-archer">&#xe61b;</span><span class="tab-name">Tag</span></li>
        <li class="sidebar-tab-categories"><span class="iconfont-archer">&#xe666;</span><span class="tab-name">Cate</span></li>
    </ul>
    <div class="sidebar-content sidebar-content-show-archive">
          <div class="sidebar-panel-archives">
    <!-- 在ejs中将archive按照时间排序 -->
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <div class="total-and-search">
        <div class="total-archive">
        Total : 15
        </div>
        <!-- search  -->
        
    </div>
    
    <div class="post-archive">
    
    
    
    
    <div class="archive-year"> 2021 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">03/02</span><a class="archive-post-title" href= "/2021/03/02/20210302-01/" >Eureka概述</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> 2020 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">12/23</span><a class="archive-post-title" href= "/2020/12/23/20201223-01/" >sentinel 简单使用</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> 2019 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/24</span><a class="archive-post-title" href= "/2019/10/24/20191024-01/" >Mysql数据库的高级应用(存储过程，触发器、索引，视图，函数）</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/22</span><a class="archive-post-title" href= "/2019/09/22/20190922-01/" >上传项目到中央仓库</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/11</span><a class="archive-post-title" href= "/2019/09/11/20190911-01/" >SpringBoot配置https</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/07</span><a class="archive-post-title" href= "/2019/09/07/20190907-01/" >面向对象三大特征和五大原则</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/31</span><a class="archive-post-title" href= "/2019/08/31/20190831-01/" >使用fatedier/frp搭建内网穿透</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/24</span><a class="archive-post-title" href= "/2019/08/24/20190824-01/" >Explain详解与索引最佳实践</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/14</span><a class="archive-post-title" href= "/2019/08/14/20190814-01/" >刘瑜写给女儿的信：愿你慢慢长大[转]</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">07/12</span><a class="archive-post-title" href= "/2019/07/12/20190712-02/" >基于redis的延迟消息队列设计[转]</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">07/12</span><a class="archive-post-title" href= "/2019/07/12/20190712-01/" >分布式唯一id：snowflake算法[转]</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">07/03</span><a class="archive-post-title" href= "/2019/07/03/20190703-01/" >记Thymeleaf Nginx 配置动静分离</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">07/01</span><a class="archive-post-title" href= "/2019/07/01/20190701-01/" >日签(七月请对我好一点)-20190701</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">06/25</span><a class="archive-post-title" href= "/2019/06/25/20190625-01/" >使用 Java8 Optional 的正确姿势[转]</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">04/14</span><a class="archive-post-title" href= "/2019/04/14/20190401-01/" >Summary-201904</a>
        </li>
    
    </div>
  </div>
        <div class="sidebar-panel-tags">
    <div class="sidebar-tags-name">
    
        <span class="sidebar-tag-name" data-tags="生活"><span class="iconfont-archer">&#xe606;</span>生活</span>
    
        <span class="sidebar-tag-name" data-tags="面试"><span class="iconfont-archer">&#xe606;</span>面试</span>
    
        <span class="sidebar-tag-name" data-tags="总结"><span class="iconfont-archer">&#xe606;</span>总结</span>
    
        <span class="sidebar-tag-name" data-tags="java"><span class="iconfont-archer">&#xe606;</span>java</span>
    
        <span class="sidebar-tag-name" data-tags="工作"><span class="iconfont-archer">&#xe606;</span>工作</span>
    
        <span class="sidebar-tag-name" data-tags="SpringBoot"><span class="iconfont-archer">&#xe606;</span>SpringBoot</span>
    
        <span class="sidebar-tag-name" data-tags="日签"><span class="iconfont-archer">&#xe606;</span>日签</span>
    
        <span class="sidebar-tag-name" data-tags="redis"><span class="iconfont-archer">&#xe606;</span>redis</span>
    
        <span class="sidebar-tag-name" data-tags="算法"><span class="iconfont-archer">&#xe606;</span>算法</span>
    
        <span class="sidebar-tag-name" data-tags="JAVA"><span class="iconfont-archer">&#xe606;</span>JAVA</span>
    
        <span class="sidebar-tag-name" data-tags="HTTPS"><span class="iconfont-archer">&#xe606;</span>HTTPS</span>
    
        <span class="sidebar-tag-name" data-tags="网络工具"><span class="iconfont-archer">&#xe606;</span>网络工具</span>
    
        <span class="sidebar-tag-name" data-tags="内网穿透"><span class="iconfont-archer">&#xe606;</span>内网穿透</span>
    
        <span class="sidebar-tag-name" data-tags="mysql"><span class="iconfont-archer">&#xe606;</span>mysql</span>
    
        <span class="sidebar-tag-name" data-tags="索引"><span class="iconfont-archer">&#xe606;</span>索引</span>
    
        <span class="sidebar-tag-name" data-tags="sentinel"><span class="iconfont-archer">&#xe606;</span>sentinel</span>
    
        <span class="sidebar-tag-name" data-tags="spring cloud"><span class="iconfont-archer">&#xe606;</span>spring cloud</span>
    
    </div>
    <div class="iconfont-archer sidebar-tags-empty">&#xe678;</div>
    <div class="tag-load-fail" style="display: none; color: #ccc; font-size: 0.6rem;">
    缺失模块。<br/>
    1、请确保node版本大于6.2<br/>
    2、在博客根目录（注意不是archer根目录）执行以下命令：<br/>
    <span style="color: #f75357; font-size: 1rem; line-height: 2rem;">npm i hexo-generator-json-content --save</span><br/>
    3、在根目录_config.yml里添加配置：
    <pre style="color: #787878; font-size: 0.6rem;">
jsonContent:
  meta: false
  pages: false
  posts:
    title: true
    date: true
    path: true
    text: false
    raw: false
    content: false
    slug: false
    updated: false
    comments: false
    link: false
    permalink: false
    excerpt: false
    categories: true
    tags: true</pre>
    </div> 
    <div class="sidebar-tags-list"></div>
</div>
        <div class="sidebar-panel-categories">
    <div class="sidebar-categories-name">
    
        <span class="sidebar-category-name" data-categories="工作"><span class="iconfont-archer">&#xe60a;</span>工作</span>
    
        <span class="sidebar-category-name" data-categories="生活"><span class="iconfont-archer">&#xe60a;</span>生活</span>
    
        <span class="sidebar-category-name" data-categories="spring-cloud"><span class="iconfont-archer">&#xe60a;</span>spring-cloud</span>
    
    </div>
    <div class="iconfont-archer sidebar-categories-empty">&#xe678;</div>
    <div class="sidebar-categories-list"></div>
</div>
    </div>
</div> 
    <script>
    var siteMeta = {
        root: "/",
        author: "Reminance"
    }
</script>
    <!-- CDN failover -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
    <script type="text/javascript">
        if (typeof window.$ === 'undefined')
        {
            console.warn('jquery load from jsdelivr failed, will load local script')
            document.write('<script src="/lib/jquery.min.js">\x3C/script>')
        }
    </script>
    <script src="/scripts/main.js"></script>
    <!-- algolia -->
    
    <!-- busuanzi  -->
    
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    <!-- CNZZ  -->
    
    </div>
    <!-- async load share.js -->
    
        <script src="/scripts/share.js" async></script>    
     
    </body>
</html>


